# ИДЗ №4
*Шиндяпкин Илья Дмитриевич БПИ-219*
## Задание
### Вариант №32
Шайка пиратов под предводительством Джона Сильвера высадилась на берег Острова
Сокровищ. Не смотря на добытую карту старого Флинта, местоположение
сокровищ по-прежнему остается загадкой, поэтому искать
клад приходится практически на ощупь. Так как Сильвер ходит на
деревянной ноге, то самому бродить по джунглям ему не с руки.
Джон Сильвер поделил остров на участки, а пиратов на небольшие группы.
Каждой группе поручается искать клад на нескольких
участках, а сам Сильвер ждет на берегу. Группа пиратов, обшарив
один участок, переходит на следующий, еще необследованный. За
кончив поиски, пираты возвращаются к Сильверу и докладывают
о результатах. Если какая–то из групп находит клад на одном из
своих участков, она возвращается к Сильверу, который шлет попугая,
инициализирующего прекращение (прервыание) всех работ.
Требуется создать приложение, моделирующее действия
Сильвера и пиратов. Сервер — Сильвер, каждая из групп
пиратов — клиент.

## Задача на 4-5.
### Общая схема решаемой задачи:
В качестве капитана в решаемой задачи выступает сервер, а в роли группы пиратов - клиент.

При запуске сервера на указанном порту, также сообщается сколько существует секторов и в каком закопан клад, в конце указывается сколько будет запущено клиентов.
Важно указывать точное количество клиентов для корректной работы программы.
Сервер и клиенты общаются по протоколу UDP.

При подключении клиента к серверу, клиент начинает искать клад, обходя еще не иследованные секторы, при этом используется мьютекс
для синхронизации работы нескольких клиентов. После того как клад будет найден, работа всех клиентов завершается.

Сервер работает до получение сигнала SIGINT. При завершении работы сервера работа клиентов не прерывается,
поэтому работа клиентов так же завершается с помощью сигнала SIGINT.

Проверкой было подтверждено, что программа соответствует всем критериям, предъявленным на 4-5.
***
### Входные и выходные данные:
При запуске сервера в качестве параметров передается порт для клиентов, количество зон для проверки, зона, где закопано сокровище, 
количество клиентов, которое будет подключаться к серверу.

При запуске клиента в качестве параметров передается IP адрес сервера, порт.

Результаты работы процессов выводятся в консоль.
***
### Тесты:
В этой же директории есть папка с примерами работы программы в виде скриншотов.
***
### Пример компиляции, запуска программы и просмотр результатов:

    $ gcc client.c -o client
    $ gcc server.c -o server -lrt -lpthread

	$ ./server 8000 10 4 1
    $ ./client 127.0.0.1 8000
***

## Задача на 6-8.
Работа была выполнена так, чтобы сразу соответствовать оценке 6-7 и 8 одновременно,
решение располагается в одной директории.

### Общая схема решаемой задачи:
Добавлен клиент-слушатель, который показывает информацию о состоянии секторов.

Для каждого из секторов будет указано одно из значений:
- 0 - неисследованный сектор
- 1 - исследованный сектор
- 2 - сектор, где закопано сокровище

Одновременно можно ставить на прослушивание множество клиентов-слушателей. 

В программе сервера добавлена функция для взаимодействия с слушателем.

Слушатель отключается при получении сигнала SIGINT, либо при нахождении клиентом клада.

Сервер отключается при получении сигнала SIGINT, либо при нахождении клиентом клада.

Для сервера и клиента-слушателя следует указывать адрес: 224.0.0.1 для корректной работы multicast.
Для обычного клиента следует по-прежнему указывать адрес 127.0.0.1.

Проверкой было подтверждено, что программа соответствует всем критериям, предъявленным на 6-8.
***
### Входные и выходные данные:
При запуске сервера в качестве параметров передается IP адрес сервера, порт для слушателя, порт для клиентов, количество зон для проверки, зона, где закопано сокровище, 
количество клиентов, которое будет подключаться к серверу.

При запуске клиента в качестве параметров передается IP адрес сервера, порт.

При запуске слушателя в качестве параметров передается IP адрес сервера, порт, а также количество секторов.

Результаты работы процессов выводятся в консоль.
***
### Тесты:
В этой же директории есть папка с примерами работы программы в виде скриншотов.
***
### Пример компиляции, запуска программы и просмотр результатов:

    $ gcc client.c -o client
    $ gcc server.c -o server -lrt -lpthread
    $ gcc listener.c -o listener

	$ ./server 224.0.0.1 8001 8000 10 4 1 
    $ ./listener 224.0.0.1 8001 10 
    $ ./client 127.0.0.1 8000
***
*Все прочие требования и особенности идентичны тем, что были на оценку 4-5, и были успешно выполнены.
Программа была протестирована на тестовых данных и показала корректное поведение.*
***
